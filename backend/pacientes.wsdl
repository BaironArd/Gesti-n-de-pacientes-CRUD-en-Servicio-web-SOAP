<?xml version="1.0" encoding="UTF-8"?>
<!-- 
ðŸ“‹ ARCHIVO WSDL - CONTRATO DE SERVICIO WEB
Define la interfaz del servicio SOAP para gestiÃ³n de pacientes
Namespace: http://localhost/pacientes
-->

<definitions 
    xmlns="http://schemas.xmlsoap.org/wsdl/" 
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:tns="http://localhost/pacientes"
    targetNamespace="http://localhost/pacientes">

    <!-- ðŸ“Š DEFINICIÃ“N DE TIPOS DE DATOS - Esquemas XML para pacientes -->
    <types>
        <xsd:schema targetNamespace="http://localhost/pacientes">

            <!-- ðŸ‘¤ PACIENTE SIN ID - Estructura para creaciÃ³n de nuevos registros -->
            <xsd:complexType name="PacienteSinID">
                <xsd:sequence>
                    <xsd:element name="nombre" type="xsd:string"/>
                    <xsd:element name="apellido" type="xsd:string"/>
                    <xsd:element name="documento" type="xsd:string"/>
                    <xsd:element name="edad" type="xsd:int"/>
                    <xsd:element name="sexo" type="xsd:string"/>
                    <xsd:element name="telefono" type="xsd:string"/>
                    <xsd:element name="direccion" type="xsd:string"/>
                    <xsd:element name="fecha_registro" type="xsd:string"/>
                </xsd:sequence>
            </xsd:complexType>

            <!-- ðŸ‘¥ PACIENTE CON ID - Estructura completa incluyendo identificador -->
            <xsd:complexType name="Paciente">
                <xsd:sequence>
                    <xsd:element name="id" type="xsd:int"/>
                    <xsd:element name="nombre" type="xsd:string"/>
                    <xsd:element name="apellido" type="xsd:string"/>
                    <xsd:element name="documento" type="xsd:string"/>
                    <xsd:element name="edad" type="xsd:int"/>
                    <xsd:element name="sexo" type="xsd:string"/>
                    <xsd:element name="telefono" type="xsd:string"/>
                    <xsd:element name="direccion" type="xsd:string"/>
                    <xsd:element name="fecha_registro" type="xsd:string"/>
                </xsd:sequence>
            </xsd:complexType>

            <!-- ðŸ“‹ LISTA DE PACIENTES - Contenedor para mÃºltiples registros -->
            <xsd:complexType name="PacientesList">
                <xsd:sequence>
                    <xsd:element name="paciente" type="tns:Paciente" minOccurs="0" maxOccurs="unbounded"/>
                </xsd:sequence>
            </xsd:complexType>

        </xsd:schema>
    </types>

    <!-- ðŸ“¨ DEFINICIÃ“N DE MENSAJES SOAP - Request/Response para cada operaciÃ³n -->

    <!-- âž• CREAR PACIENTE - Recibe datos sin ID, retorna ID asignado -->
    <message name="createPatientRequest">
        <part name="data" type="tns:PacienteSinID"/>
    </message>
    <message name="createPatientResponse">
        <part name="return" type="xsd:int"/>
    </message>

    <!-- ðŸ“‹ LISTAR PACIENTES - Sin parÃ¡metros, retorna lista completa -->
    <message name="getPatientsRequest"/>
    <message name="getPatientsResponse">
        <part name="return" type="tns:PacientesList"/>
    </message>

    <!-- ðŸ” OBTENER PACIENTE - Recibe ID, retorna paciente especÃ­fico -->
    <message name="getPatientRequest">
        <part name="id" type="xsd:int"/>
    </message>
    <message name="getPatientResponse">
        <part name="return" type="tns:Paciente"/>
    </message>

    <!-- âœï¸ ACTUALIZAR PACIENTE - Recibe paciente completo con ID, retorna estado -->
    <message name="updatePatientRequest">
        <part name="data" type="tns:Paciente"/>
    </message>
    <message name="updatePatientResponse">
        <part name="return" type="xsd:boolean"/>
    </message>

    <!-- ðŸ—‘ï¸ ELIMINAR PACIENTE - Recibe documento, retorna estado de eliminaciÃ³n -->
    <message name="deletePatientRequest">
        <part name="documento" type="xsd:string"/>
    </message>
    <message name="deletePatientResponse">
        <part name="return" type="xsd:boolean"/>
    </message>

    <!-- ðŸŽ›ï¸ PORT TYPE - Interfaz abstracta con todas las operaciones disponibles -->
    <portType name="PacientesPortType">

        <!-- âž• OPERACIÃ“N: Crear paciente -->
        <operation name="createPatient">
            <input message="tns:createPatientRequest"/>
            <output message="tns:createPatientResponse"/>
        </operation>

        <!-- ðŸ“‹ OPERACIÃ“N: Listar todos los pacientes -->
        <operation name="getPatients">
            <input message="tns:getPatientsRequest"/>
            <output message="tns:getPatientsResponse"/>
        </operation>

        <!-- ðŸ” OPERACIÃ“N: Obtener paciente por ID -->
        <operation name="getPatient">
            <input message="tns:getPatientRequest"/>
            <output message="tns:getPatientResponse"/>
        </operation>

        <!-- âœï¸ OPERACIÃ“N: Actualizar paciente existente -->
        <operation name="updatePatient">
            <input message="tns:updatePatientRequest"/>
            <output message="tns:updatePatientResponse"/>
        </operation>

        <!-- ðŸ—‘ï¸ OPERACIÃ“N: Eliminar paciente por documento -->
        <operation name="deletePatient">
            <input message="tns:deletePatientRequest"/>
            <output message="tns:deletePatientResponse"/>
        </operation>

    </portType>

    <!-- ðŸ”— BINDING - Define protocolo SOAP para las operaciones -->
    <binding name="PacientesBinding" type="tns:PacientesPortType">
        <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>

        <!-- âž• BINDING: Crear paciente -->
        <operation name="createPatient">
            <soap:operation soapAction="createPatient"/>
            <input><soap:body use="literal"/></input>
            <output><soap:body use="literal"/></output>
        </operation>

        <!-- ðŸ“‹ BINDING: Listar pacientes -->
        <operation name="getPatients">
            <soap:operation soapAction="getPatients"/>
            <input><soap:body use="literal"/></input>
            <output><soap:body use="literal"/></output>
        </operation>

        <!-- ðŸ” BINDING: Obtener paciente -->
        <operation name="getPatient">
            <soap:operation soapAction="getPatient"/>
            <input><soap:body use="literal"/></input>
            <output><soap:body use="literal"/></output>
        </operation>

        <!-- âœï¸ BINDING: Actualizar paciente -->
        <operation name="updatePatient">
            <soap:operation soapAction="updatePatient"/>
            <input><soap:body use="literal"/></input>
            <output><soap:body use="literal"/></output>
        </operation>

        <!-- ðŸ—‘ï¸ BINDING: Eliminar paciente -->
        <operation name="deletePatient">
            <soap:operation soapAction="deletePatient"/>
            <input><soap:body use="literal"/></input>
            <output><soap:body use="literal"/></output>
        </operation>

    </binding>

    <!-- ðŸŒ SERVICIO - Punto final de acceso al servicio -->
    <service name="PacientesService">
        <port name="PacientesPort" binding="tns:PacientesBinding">
            <!-- ðŸ“ URL DEL ENDPOINT - Donde estÃ¡ hospedado el servicio -->
            <soap:address location="http://localhost/pacientes_soap/backend/server.php"/>
        </port>
    </service>

</definitions>